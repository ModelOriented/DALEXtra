<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculates the feature groups importance (called aspects importance) for a
selected observation — aspect_importance • DALEXtra</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- dalexverse -->
<link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>






<meta property="og:title" content="Calculates the feature groups importance (called aspects importance) for a
selected observation — aspect_importance" />
<meta property="og:description" content="Aspect Importance function takes a sample from a given dataset and modifies
it. Modification is made by replacing part of its aspects by values from the
observation. Then function is calculating the difference between the
prediction made on modified sample and the original sample. Finally, it
measures the impact of aspects on the change of prediction by using the
linear model or lasso." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14""></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">DALEXtra</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">2.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette_aspect_importance.html">Aspect importance function examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ModelOriented/DALEXtra/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculates the feature groups importance (called aspects importance) for a
selected observation</h1>
    <small class="dont-index">Source: <a href='https://github.com/ModelOriented/DALEXtra/blob/master/R/aspect_importance.R'><code>R/aspect_importance.R</code></a></small>
    <div class="hidden name"><code>aspect_importance.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Aspect Importance function takes a sample from a given dataset and modifies
it. Modification is made by replacing part of its aspects by values from the
observation. Then function is calculating the difference between the
prediction made on modified sample and the original sample. Finally, it
measures the impact of aspects on the change of prediction by using the
linear model or lasso.</p>
    </div>

    <pre class="usage"><span class='fu'>aspect_importance</span>(<span class='kw'>x</span>, <span class='kw'>...</span>)

<span class='co'># S3 method for explainer</span>
<span class='fu'>aspect_importance</span>(
  <span class='kw'>x</span>,
  <span class='kw'>new_observation</span>,
  <span class='kw'>aspects</span>,
  N = <span class='fl'>100</span>,
  sample_method = <span class='st'>"default"</span>,
  n_var = <span class='fl'>0</span>,
  f = <span class='fl'>2</span>,
  show_cor = <span class='fl'>FALSE</span>,
  <span class='kw'>...</span>
)

<span class='co'># S3 method for default</span>
<span class='fu'>aspect_importance</span>(
  <span class='kw'>x</span>,
  <span class='kw'>data</span>,
  predict_function = <span class='kw'>predict</span>,
  <span class='kw'>new_observation</span>,
  <span class='kw'>aspects</span>,
  N = <span class='fl'>100</span>,
  label = <span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span>(<span class='kw'>x</span>)[<span class='fl'>1</span>],
  sample_method = <span class='st'>"default"</span>,
  n_var = <span class='fl'>0</span>,
  f = <span class='fl'>2</span>,
  show_cor = <span class='fl'>FALSE</span>,
  <span class='kw'>...</span>
)

<span class='fu'>lime</span>(<span class='kw'>x</span>, <span class='kw'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an explainer created with the <code><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>DALEX::explain()</a></code> function
or a model to be explained.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other parameters</p></td>
    </tr>
    <tr>
      <th>new_observation</th>
      <td><p>selected observation with columns that corresponds to
variables used in the model</p></td>
    </tr>
    <tr>
      <th>aspects</th>
      <td><p>list containting grouping of features into aspects</p></td>
    </tr>
    <tr>
      <th>N</th>
      <td><p>number of observations to be sampled (with replacement) from data</p></td>
    </tr>
    <tr>
      <th>sample_method</th>
      <td><p>sampling method in <code><a href='get_sample.html'>get_sample</a></code></p></td>
    </tr>
    <tr>
      <th>n_var</th>
      <td><p>maximum number of non-zero coefficients after lasso fitting,
if zero than linear regression is used</p></td>
    </tr>
    <tr>
      <th>f</th>
      <td><p>frequency in <code><a href='get_sample.html'>get_sample</a></code></p></td>
    </tr>
    <tr>
      <th>show_cor</th>
      <td><p>show if all features in aspect are pairwise positivly
correlated, works only if dataset contains solely numeric values</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>dataset, it will be extracted from <code>x</code> if it's an explainer
NOTE: It is best when target variable is not present in the <code>data</code></p></td>
    </tr>
    <tr>
      <th>predict_function</th>
      <td><p>predict function, it will be extracted from <code>x</code>
if it's an explainer</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>name of the model. By default it's extracted from the 'class'
attribute of the model.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of the class <code>aspect_importance</code>. Contains dataframe
  that describes aspects' importance.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'><a href='https://ModelOriented.github.io/DALEX'>"DALEX"</a></span>)

<span class='kw'>model_titanic_glm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span>(<span class='kw'>survived</span> <span class='op'>==</span> <span class='fl'>1</span> <span class='op'>~</span>
                         <span class='kw'>class</span><span class='op'>+</span><span class='kw'>gender</span><span class='op'>+</span><span class='kw'>age</span><span class='op'>+</span><span class='kw'>sibsp</span><span class='op'>+</span><span class='kw'>parch</span><span class='op'>+</span><span class='kw'>fare</span><span class='op'>+</span><span class='kw'>embarked</span>,
                         data = <span class='kw'>titanic_imputed</span>,
                         family = <span class='st'>"binomial"</span>)

<span class='kw'>explain_titanic_glm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='kw'>model_titanic_glm</span>,
                               data = <span class='kw'>titanic_imputed</span>[,<span class='op'>-</span><span class='fl'>8</span>],
                               y = <span class='kw'>titanic_imputed</span><span class='op'>$</span><span class='kw'>survived</span> <span class='op'>==</span> <span class='fl'>1</span>,
                               verbose = <span class='fl'>FALSE</span>)

<span class='kw'>aspects</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(wealth = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"class"</span>, <span class='st'>"fare"</span>),
                family = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"sibsp"</span>, <span class='st'>"parch"</span>),
                personal = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"gender"</span>, <span class='st'>"age"</span>),
                embarked = <span class='st'>"embarked"</span>)

<span class='fu'>aspect_importance</span>(<span class='kw'>explain_titanic_glm</span>,
                  new_observation = <span class='kw'>titanic_imputed</span>[<span class='fl'>1</span>,],
                  aspects = <span class='kw'>aspects</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Function is deprecated. Please use triplot package</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Function is deprecated. Please use triplot package</span></div><div class='output co'>#&gt;    aspects importance     features
#&gt; 3   family    0.09559 sibsp, parch
#&gt; 5 embarked    0.07390     embarked
#&gt; 4 personal   -0.07312  gender, age
#&gt; 2   wealth   -0.04942  class, fare</div><div class='input'>
<span class='co'># \donttest{</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='st'><a href='https://www.stat.berkeley.edu/~breiman/RandomForests'>"randomForest"</a></span>)</div><div class='output co'>#&gt; <span class='message'>randomForest 4.6-14</span></div><div class='output co'>#&gt; <span class='message'>Type rfNews() to see new features/changes/bug fixes.</span></div><div class='input'><span class='kw'>model_titanic_rf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/randomForest.html'>randomForest</a></span>(<span class='kw'>survived</span> <span class='op'>~</span> <span class='kw'>class</span> <span class='op'>+</span> <span class='kw'>gender</span> <span class='op'>+</span> <span class='kw'>age</span> <span class='op'>+</span> <span class='kw'>sibsp</span> <span class='op'>+</span>
                                 <span class='kw'>parch</span> <span class='op'>+</span> <span class='kw'>fare</span> <span class='op'>+</span> <span class='kw'>embarked</span>,
                                 data = <span class='kw'>titanic_imputed</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: The response has five or fewer unique values.  Are you sure you want to do regression?</span></div><div class='input'>
<span class='kw'>explain_titanic_rf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='kw'>model_titanic_rf</span>,
                              data = <span class='kw'>titanic_imputed</span>[,<span class='op'>-</span><span class='fl'>8</span>],
                              y = <span class='kw'>titanic_imputed</span><span class='op'>$</span><span class='kw'>survived</span> <span class='op'>==</span> <span class='fl'>1</span>,
                              verbose = <span class='fl'>FALSE</span>)

<span class='fu'>aspect_importance</span>(<span class='kw'>explain_titanic_rf</span>,
                  new_observation = <span class='kw'>titanic_imputed</span>[<span class='fl'>1</span>,],
                  aspects = <span class='kw'>aspects</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Function is deprecated. Please use triplot package</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Function is deprecated. Please use triplot package</span></div><div class='output co'>#&gt;    aspects importance     features
#&gt; 4 personal   -0.09802  gender, age
#&gt; 5 embarked    0.06540     embarked
#&gt; 3   family    0.05432 sibsp, parch
#&gt; 2   wealth   -0.02789  class, fare</div><div class='input'>
<span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Szymon Maksymiuk, Przemyslaw Biecek, Katarzyna Pekala.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


